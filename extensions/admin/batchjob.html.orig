

<<<<<<< HEAD
<section class='ui-widget marginBottom' id='batchJobStatusTemplate'>

	<hgroup class='marginBottom'>
		<h3><span data-bind="var: batchjob(jobid); format:text; pretext:Job ID: ;"></span></h3>
		<h5 data-bind="var: batchjob(status); format:text; pretext:Status: ;"></h5>
	</hgroup>

	<div data-bind="var: batchjob(started); format:unix2mdy; showtime:1; pretext:Started: ;"></div>
	<div>
		<span data-bind="var: batchjob(records_done); format:text; pretext:Records done/total: ; hideZero:false;"></span>
		<span data-bind="var: batchjob(records_total); format:text; pretext:/;"></span>
	</div>

	<p class='marginBottom' data-bind="var: batchjob(status_msg); format:text;"></p>


	<p data-bind="var: batchjob(notes); format:text; before:<h2>Notes:</h2>;" class='marginBottom'></p>
	<button data-app-event="admin_batchJob|execBatchCleanup">Clean Up/Remove</button>

	<p>This panel will not update automatically. Please go to the <a href="#" onClick="navigateTo('#!batchManager'); if($(this).closest('.ui-dialog-content').length){$(this).closest('.ui-dialog-content').dialog('close')}; return false">Batch Job Manager</a> for status</p>

</section>





<div id='batchJobManagerPageTemplate' class='page pageUser' data-app-role='dualModeContainer' data-app-mode='list'>

	<section class='dualModeDetailContainer' data-app-role='dualModeDetail'></section>

	<section class='dualModeListContainer' data-app-role='dualModeList'>
		<div class='ui-widget-header ui-corner-top'>
			<h3 class='heading'>Batch Jobs</h3>
		</div>
		
		<div class='ui-widget-content ui-corner-bottom'>
		<table class='gridTable fullWidth marginBottom' >
		<!-- thead is needed, whether visible or not, so that the data-name attributes can be used to look up column # -->
		<thead>
		<tr>
			<th class='alignLeft'>ID</th>
			<th class='alignLeft'>Job Name</th>
			<th class='hideInMinimalMode alignLeft'>Job Type</th>
			<th class='hideInMinimalMode alignLeft'>User</th>
			<th class='hideInMinimalMode alignLeft'>Created</th>
			<th>Status</th>
			<th data-anytable-nosort='true'></th>
		</tr>
		</thead>
		<tbody data-bind="var: users(@JOBS); format:processList; loadsTemplate:batchJobRowTemplate;" class='dualModeList' data-app-role='dualModeListContents'></tbody>
		</table>
		</div>
	</section>
</div>
=======
<section class="ui-widget marginBottom" id="batchJobStatusTemplate">
	<div class="floatRight batchTimer" data-app-role="batchJobTimer"></div>
	<hgroup class="marginBottom">
		<h3><span data-tlc="bind $var '.jobid'; if (is $var --notblank;) {{format --prepend='Job ID: '; apply --append;}};"></span></h3>
		<h5 data-tlc="bind $var '.status'; if (is $var --notblank;) {{format --prepend='Status: '; apply --append;}};"></h5>
	</hgroup>

	<div data-tlc="bind $var '.started'; datetime --out='mdy'; if (is $var --notblank;) {{format --prepend='Started: '; apply --append;}};"></div>
	<div>
		<span data-tlc="bind $var '.records_done'; if (is $var --notblank;) {{format --prepend='Records done/total: '; apply --append;}};"></span>
		<span data-tlc="bind $var '.records_total'; if (is $var --notblank;) {{format --prepend='/'; apply --append;}};"></span>
		<div data-tlc="bind $var '.records_warn'; if (is $var --notblank;) {{format --prepend='Warnings: '; apply --append;}};"></div>
		<div data-tlc="bind $var '.records_error'; if (is $var --notblank;) {{format --prepend='Errors: '; apply --append;}};"></div>
	</div>

	<p data-tlc="bind $var '.status_msg'; if (is $var --notblank;) {{apply --append;}};" class="marginBottom"></p>


	<p data-tlc="bind $var '.notes'; if (is $var --notblank;) {{apply --append;}};" class="marginBottom"></p>
	<button data-app-click="admin_batchjob|adminBatchJobCleanupExec" class="applyButton" data-text="true" data-icon-primary="ui-icon-trash"  data-tlc="bind $var '.status';  format --truncate='3'; apply --append; if(is $var --eq='END';) {{apply --hide;}};">Cancel/Remove Job</button>

	<p data-tlc="bind $var '.status';  format --truncate='3'; apply --append; if(is $var --eq='END';) {{apply --hide;}};">This panel will update automatically if the job is not finished. You can shrink the window (drag a corner) and leave it open. The <a href="/ext/admin_batchjob/showBatchJobManager" onclick="if($(this).closest('.ui-dialog-content').length){$(this).closest('.ui-dialog-content').dialog('close')};">Batch Job Manager can be found here.</a></p>


	<div class='buttonset' data-tlc="bind $var '.GUID'; apply --attrib='data-guid';" >

		<button data-app-click="admin_batchjob|showReport" class='displayNone applyButton' data-text='true' data-icon-primary='ui-icon-image' data-tlc="bind $var '.status';  format --truncate='3'; if(is $var --eq='END';) {{bind $exec '.BATCH_EXEC'; format --truncate='6'; if(is $exec --eq='REPORT';) {{ apply --show }}; }};">View Report</button>
		
		<button data-app-click="admin_batchjob|showDownload" class='displayNone applyButton' data-text='true' data-icon-primary='ui-icon-arrowthickstop-1-s' data-tlc="bind $var '.status';  format --truncate='3'; if(is $var --eq='END';) {{bind $exec '.BATCH_EXEC'; format --truncate='6'; if(is $exec --eq='EXPORT';) {{ apply --show }}; }};">Download Report</button>

	</div>

</section>


>>>>>>> d39ca6fba9090c373b1d09ea0ca063c863001bcf


<table>
<tr id='batchJobRowTemplate'>
	<td data-bind="var: user(ID); format:text;"></td>
	<td data-bind="var: user(TITLE); format:text;"></td>
<<<<<<< HEAD
	<td data-bind="var: user(JOB_TYPE); format:text;" class='hideInMinimalMode'></td>
=======
	<td data-bind="var: user(BATCH_EXEC); format:text;" class='hideInMinimalMode'></td>
>>>>>>> d39ca6fba9090c373b1d09ea0ca063c863001bcf
	<td data-bind="var: user(LUSERNAME); format:text;" class='hideInMinimalMode'></td>
	<td data-bind="var: user(CREATED_TS); format:text;" class='hideInMinimalMode'></td>
	<td data-bind="var: user(STATUS); format:text;"></td>
	<td class='alignRight'>
<<<<<<< HEAD
		<button data-app-event="admin_batchJob|showReport" class='displayNone'>View Report</button>
		<button data-app-event="admin_batchJob|execBatchCleanup" class='displayNone'>Delete</button>
		<button data-app-event="admin_batchJob|showBatchDetail">Batch Details</button>
=======
		<button data-app-click="admin_batchjob|adminBatchJobCleanupExec" class='applyButton' data-text='false' data-icon-primary='ui-icon-trash' data-mode='list'>Delete</button>
		
		<button data-app-click="admin_batchjob|showReport" class='displayNone applyButton' data-text='false' data-icon-primary='ui-icon-image' data-bind="useParentData:true; format:handleButtonDisplay; extension:admin_batchjob; exec:REPORT;">View Report</button>
		
		<button data-app-click="admin_batchjob|showDownload" class='displayNone applyButton' data-text='false' data-icon-primary='ui-icon-arrowthickstop-1-s' data-bind="useParentData:true; format:handleButtonDisplay; extension:admin_batchjob; exec:EXPORT;">Download Report</button>
		
		<button data-app-click="admin_batchjob|adminBatchJobStatus" class='applyButton' data-text='false' data-icon-primary='ui-icon-info'>Batch Details</button>
>>>>>>> d39ca6fba9090c373b1d09ea0ca063c863001bcf
	</td>
	
</tr>
</table>
